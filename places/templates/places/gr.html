<html>
    <head>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript">
                function initialize() {
                    var latlng = new google.maps.LatLng(-34.397, 150.644);
                    var myOptions = {
                        zoom: 15,
                        center: latlng,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    var map = new google.maps.Map(
                            document.getElementById("map_canvas"),
                            myOptions);

                    function addMarker(map, location) {
                        var marker = new google.maps.Marker({
                            position: location,
                            title: "Hello World!"
                        });

                        // To add the marker to the map, call setMap();
                        marker.setMap(map);

                        // add also a info window
                        var contentString = new Date().toGMTString();
                        var infowindow = new google.maps.InfoWindow({
                            content: contentString
                        });
                        infowindow.open(map, marker);

                    }
                    if (navigator.geolocation) {
                        browserSupportFlag = true;

                        var watchID = navigator.geolocation.watchPosition(
                                function(position) {
                                    addMarker(
                                        map,
                                        new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
                                }, function(err) {alert("Error: " + e)}, {
                            enableHighAccuracy: true,
                            maximumAge: 30000,
                            timeout: 27000
                        });
                    }
                }
            </script>
        </head>
    <body onload="initialize()">
        <div id="map_canvas" style="width:100%; height:100%"></div>
    </body>
</html>
